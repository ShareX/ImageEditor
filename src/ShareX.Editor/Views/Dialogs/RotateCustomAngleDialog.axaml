<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:ShareX.Editor.ViewModels"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="300"
             x:Class="ShareX.Editor.Views.Dialogs.RotateCustomAngleDialog"
             x:Name="RotateCustomAngleDialogRoot"
             x:DataType="vm:MainViewModel">

    <UserControl.Resources>
        <SolidColorBrush x:Key="AccentColor">#3975D5</SolidColorBrush>
        <SolidColorBrush x:Key="TextColor">#E7E9EA</SolidColorBrush>
        <SolidColorBrush x:Key="LabelColor">#9CA3AF</SolidColorBrush>
        <FontFamily x:Key="FontAwesome">avares://ShareX.Editor/Assets#Font Awesome 7 Free</FontFamily>
    </UserControl.Resources>

    <UserControl.Styles>
        <Style Selector="TextBlock.label">
            <Setter Property="Foreground" Value="{StaticResource LabelColor}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>
        <Style Selector="NumericUpDown">
            <Setter Property="Minimum" Value="-180"/>
            <Setter Property="Maximum" Value="180"/>
            <Setter Property="Increment" Value="0.1"/>
            <Setter Property="FormatString" Value="0.0"/>
        </Style>
        <Style Selector="Button.primary">
            <Setter Property="Background" Value="{StaticResource AccentColor}"/>
            <Setter Property="Foreground" Value="{StaticResource TextColor}"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
        <Style Selector="Button.secondary">
            <Setter Property="Background" Value="#3E3E3E"/>
            <Setter Property="Foreground" Value="{StaticResource TextColor}"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
        <Style Selector="Button.icon-button">
             <Setter Property="Background" Value="#3E3E3E"/>
             <Setter Property="Foreground" Value="{StaticResource TextColor}"/>
             <Setter Property="Padding" Value="10,6"/>
             <Setter Property="CornerRadius" Value="4"/>
             <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>
    </UserControl.Styles>

    <Border Background="#2E2E2E" CornerRadius="8" Padding="24" MinWidth="350">
        <StackPanel Spacing="16">
            <!-- Header -->
            <TextBlock Text="Rotate" 
                       FontSize="18" 
                       FontWeight="Bold" 
                       Foreground="{StaticResource TextColor}"/>

            <!-- Angle Section -->
            <StackPanel Spacing="8">
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock Classes="label" Text="Angle (degrees)" VerticalAlignment="Center"/>
                    <NumericUpDown x:Name="AngleDegrees"
                                   Value="{Binding RotateAngleDegrees}"
                                   Minimum="-180" Maximum="180" Increment="0.1"
                                   FormatString="0.0"/>
                </Grid>

                <Slider x:Name="AngleSlider"
                        Minimum="-180" Maximum="180" 
                        Value="{Binding RotateAngleDegrees}"
                        TickFrequency="15" IsSnapToTickEnabled="False"/>

                <!-- Quick Actions -->
                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                    <Button Classes="icon-button" Click="OnResetClick" ToolTip.Tip="Reset">
                        <StackPanel Orientation="Horizontal" Spacing="6">
                             <TextBlock FontFamily="{StaticResource FontAwesome}" Text="&#xf2ea;"/> <!-- fa-rotate-left -->
                             <TextBlock Text="Reset"/>
                        </StackPanel>
                    </Button>
                    <Button Classes="icon-button" Click="OnRotateLeftClick" ToolTip.Tip="-90°">
                        <StackPanel Orientation="Horizontal" Spacing="6">
                            <TextBlock FontFamily="{StaticResource FontAwesome}" Text="&#xf0e2;"/> <!-- fa-undo -->
                            <TextBlock Text="-90"/>
                        </StackPanel>
                    </Button>
                    <Button Classes="icon-button" Click="OnRotateRightClick" ToolTip.Tip="+90°">
                        <StackPanel Orientation="Horizontal" Spacing="6">
                            <TextBlock FontFamily="{StaticResource FontAwesome}" Text="&#xf01e;"/> <!-- fa-redo -->
                            <TextBlock Text="+90"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </StackPanel>

            <TextBlock Text="Changes are applied live. Cancel to revert." 
                       Foreground="#888888" FontSize="12" TextWrapping="Wrap" />

            <!-- Buttons -->
            <Grid ColumnDefinitions="*,Auto,Auto" Margin="0,8,0,0">
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                    <Button Classes="secondary" Content="Cancel" Command="{Binding CancelRotateCustomAngleCommand}"/>
                    <Button Classes="primary" Content="OK" Command="{Binding CommitRotateCustomAngleCommand}"/>
                </StackPanel>
            </Grid>
        </StackPanel>
    </Border>
</UserControl>
